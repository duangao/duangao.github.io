<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Y组合子 - 羽加迪姆勒维奥萨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="lambda calculus
BNF 文法定义

123+ &amp;lt;expr&amp;gt; ::= &amp;lt;identifier&amp;gt;+ &amp;lt;expr&amp;gt; ::= lambda &amp;lt;identifier-list&amp;gt; -&amp;gt; &amp;lt;expr&amp;gt;+ &amp;lt;expr&amp;gt; ::= (&amp;lt;expr&amp;gt; &amp;lt;expr&amp;gt;)

BNF 定义中，前两条定义了lamb">
<meta property="og:type" content="article">
<meta property="og:title" content="Y组合子">
<meta property="og:url" content="https://duangao.github.io/2015/03/16/Y组合子/index.html">
<meta property="og:site_name" content="羽加迪姆勒维奥萨">
<meta property="og:description" content="lambda calculus
BNF 文法定义

123+ &amp;lt;expr&amp;gt; ::= &amp;lt;identifier&amp;gt;+ &amp;lt;expr&amp;gt; ::= lambda &amp;lt;identifier-list&amp;gt; -&amp;gt; &amp;lt;expr&amp;gt;+ &amp;lt;expr&amp;gt; ::= (&amp;lt;expr&amp;gt; &amp;lt;expr&amp;gt;)

BNF 定义中，前两条定义了lamb">
<meta property="og:image" content="http://images.cnitblog.com/blog/80686/201304/10164405-ce393a9b67a74fe390681facf1e04b9a.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Y组合子">
<meta name="twitter:description" content="lambda calculus
BNF 文法定义

123+ &amp;lt;expr&amp;gt; ::= &amp;lt;identifier&amp;gt;+ &amp;lt;expr&amp;gt; ::= lambda &amp;lt;identifier-list&amp;gt; -&amp;gt; &amp;lt;expr&amp;gt;+ &amp;lt;expr&amp;gt; ::= (&amp;lt;expr&amp;gt; &amp;lt;expr&amp;gt;)

BNF 定义中，前两条定义了lamb">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:https://duangao.github.io"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer"><article id="post-Y组合子" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Y组合子
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2015/03/16/Y组合子/" class="article-date">
  <time datetime="2015-03-16T03:41:45.000Z" itemprop="datePublished">3月 16 2015</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="http://images.cnitblog.com/blog/80686/201304/10164405-ce393a9b67a74fe390681facf1e04b9a.jpg" alt=""></p>
<h2 id="lambda_calculus">lambda calculus</h2><ul>
<li>BNF 文法定义</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+ <span class="tag">&lt;<span class="title">expr</span>&gt;</span> ::= <span class="tag">&lt;<span class="title">identifier</span>&gt;</span></span><br><span class="line">+ <span class="tag">&lt;<span class="title">expr</span>&gt;</span> ::= lambda <span class="tag">&lt;<span class="title">identifier-list</span>&gt;</span> -&gt; <span class="tag">&lt;<span class="title">expr</span>&gt;</span></span><br><span class="line">+ <span class="tag">&lt;<span class="title">expr</span>&gt;</span> ::= (<span class="tag">&lt;<span class="title">expr</span>&gt;</span> <span class="tag">&lt;<span class="title">expr</span>&gt;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>BNF 定义中，前两条定义了lambda 表达式的格式，第三条实际上是其调用方法。</li>
</ul>
<a id="more"></a>
<ul>
<li>lambda 函数是单参的，但实际上可以利用curry来表达多参函数：<br>比如：<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\x,y-&gt;x+y</span><br><span class="line"></span><br><span class="line">\x-&gt;\y-&gt;x+y</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>也就是说 (lambda (a b) (+ a b) )  &lt;=&gt;  (lambda (a)  (lambda (b) (+ a b)))</p>
<ul>
<li>实现数字和加法</li>
</ul>
<p>0：</p>
<blockquote>
<p>   (define zero (lambda (f) (lambda (x) x)))</p>
</blockquote>
<p>1： </p>
<blockquote>
<p>   (define one ( lambda (f) (lambda (x) (f x))))</p>
</blockquote>
<p>2：</p>
<blockquote>
<p>   (define two (lambda (f) (lambda (x) (f (f x)))))</p>
</blockquote>
<p>……</p>
<p>+： </p>
<blockquote>
<p>   (define (plus a b)<br>           (lambda (f) (lambda (x) ((a f) ((b f) x)))))</p>
</blockquote>
<h2 id="问题由来">问题由来</h2><ul>
<li>唯一存在的问题是递归<br>先来看一个阶乘函数:</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define (fact n) &#10;    (cond [(= n 0) 1]&#10;    &#9;  [else (* n (fact (- n 1) ) ] )))</span><br></pre></td></tr></table></figure>
<p>实现递归的方式是通过在函数体内部调用自身来实现，然而lambda 函数是没有名字的！<br>我们可以通过define或者let等语法糖来实现，但这并不是纯粹的lambda 函数。</p>
<h2 id="Y组合子">Y组合子</h2><ul>
<li>什么是组合子？<br>  简单说，就是表达式中没有自由变量，都是 bounded 变量。</li>
<li>Y 组合子的定义<br>  (Y F) = f </li>
</ul>
<blockquote>
<p>Y表示Y组合子，F表示某个非递归函数，f表示对应的递归版本 </p>
</blockquote>
<h2 id="Y组合子的推演">Y组合子的推演</h2><ul>
<li>推导一个Y组合子的性质</li>
</ul>
<p>f 为真正的递归函数，F为伪递归函数，类似于下文的almost-factorial</p>
<p> f = (F f)                                        ………………..(1)<br> so f is the fixed-point of F<br> def:  (Y F)=f                                    …………………(2)<br> combine (1) and (2):</p>
<p><strong> (Y F) = (F f) = (F (Y F))  </strong>                   ……………..(3)</p>
<ul>
<li>first step, 伪递归函数</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define almost-factorial &#10;  (lambda (self)&#10;     (lambda (n)&#10;      (cond [(= n 0) 1] &#10;            [else (* n (self (- n 1)))]))))</span><br></pre></td></tr></table></figure>
<ul>
<li>下面的函数可以在strcit和lazy求值下工作</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define part-factorial&#10;   (lambda (self)&#10;     (lambda (n)&#10;         (cond [(= n 0) 1]&#10;               [else (* n  ( (self self)  (- n 1) )  )]&#10;              ) )))&#10; (define f (part-factorial part-factorial))</span><br></pre></td></tr></table></figure>
<ul>
<li>改写上面的函数，将self self结构抽提出来，这个版本仅可以在lazy 求值下工作，<br>否则let 表达式会不断扩展无法结束</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define part-factorial-lazy &#10;   (lambda (self) &#10;     (  let ([f (self self)])&#10;         (lambda (n) &#10;           ( cond [(= n 0) 1]&#10;                  [else (* n (f (- n 1)))]&#10;                  )))))&#10;(define f-lazy (part-factorial-lazy part-factorial-lazy))</span><br></pre></td></tr></table></figure>
<ul>
<li>let 表达式是lambda表达式的语法糖，替换<br>(let ([x expr1]) (expr2) &lt;=&gt;  ( (lambda (x) expr2) expr1)</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define part-factorial-lazy &#10;  (lambda (self) &#10;    ( &#10;     (lambda (f) &#10;       (lambda (n)&#10;         ( cond [(= n 0) 1] &#10;                [else (* n (f (- n 1)))])))   &#10;     (self self))))&#10;&#10;(define f-lazy (part-factorial-lazy part-factorial-lazy))</span><br></pre></td></tr></table></figure>
<ul>
<li>注意上面的函数内部的函数就是之前定义的almost-factorial</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define (part-factorial-lazy self)&#10;  (almost-factorial (self self)))&#10;&#10;(define f-lazy (part-factorial-lazy part-factorial-lazy))</span><br></pre></td></tr></table></figure>
<ul>
<li>将part-factorial-lazy的定义放在 f 内部来简化</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define fact&#10;  (let ([part-factorial-lazy (lambda (self) (almost-factorial (self self)))])&#10;    (part-factorial-lazy part-factorial-lazy) ))</span><br></pre></td></tr></table></figure>
<ul>
<li>把上面式子里面的part-factorial-lazy换成x，便于阅读</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define fact&#10;  (let ([x (lambda (self) (almost-factorial (self self)))])&#10;    (x x) ))</span><br></pre></td></tr></table></figure>
<ul>
<li>再次替换let表达式到其等价的lambda形式</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define fact&#10;  (&#10;    (lambda (x) (x x) )&#10;    (lambda(self) (almost-factorial (self self)) )&#10;    ))</span><br></pre></td></tr></table></figure>
<ul>
<li>将self也替换成x，便于阅读<br>注意 这里的x和之前的x并不是同一个变量，从作用域上可以看出来。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define fact&#10;  (&#10;    (lambda (x) (x x) )&#10;    (lambda(x) (almost-factorial (x x)) )&#10;    ))</span><br></pre></td></tr></table></figure>
<ul>
<li>lazy-Y</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define  ( Y-lazy non-recursive-f)&#10;    ( (lambda (x) (x x)) &#10;      (lambda (x) (non-recursive-f (x x)))))&#10;&#10;(define factorial (Y-lazy almost-factorial))</span><br></pre></td></tr></table></figure>
<ul>
<li>将上面定义中 第二个lambda表达式作为参数代入第一个中</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define  ( Y-lazy non-recursive-f)&#10;    ( (lambda (x)  (non-recursive-f (x x))) &#10;      (lambda (x) (non-recursive-f (x x)))))&#10;&#10;(define factorial (Y-lazy almost-factorial))</span><br></pre></td></tr></table></figure>
<ul>
<li><p>证明其正确性</p>
<p>   we should prove (Y F)=(F (Y F))</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Y F) = ( (lambda(x) (F (x x)))  (lambda (x) (F (x x)))  )&#10;      = (F (lambda (x) (F (x x))) (lambda (x) (F (x x))))&#10;      = (F (Y F))</span><br></pre></td></tr></table></figure>
<h2 id="strict_版本的Y组合子">strict 版本的Y组合子</h2><p>待续</p>

      
    </div>
  
    <footer class="article-footer">
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scheme/">scheme</a></li></ul>

    </footer>
  
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/03/22/几个有趣的小例子/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-title"><span>&lt;</span>&nbsp;
        
          几个有趣的小例子
        
      </div>
    </a>
  
  
    <a href="/2015/01/31/一个小demo/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">一个小demo&nbsp;<span>&gt;</span></div>
    </a>
  
</nav>

  
</article>

</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
   	 Email: gaoduan0306@gmail.com  gaoduan0306@163.com 		</br>
   	 Anothor blog: <a href="http://www.cnblogs.com/gaoduan/">cnblog</a>.
    </div>
  </div>
</footer>
    

<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>